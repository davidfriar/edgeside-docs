<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
    Parameter Mapping &middot; EdgeSide Docs
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400italic,700|Overlock+SC&display=swap">
  <link rel="stylesheet" href="/css/edgeside.css">
<style>
</style>
  <script type="text/javascript">
    /* PrismJS 1.22.0
https://prismjs.com/download.html#themes=prism&languages=markup */
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(u){var c=/\blang(?:uage)?-([\w-]+)\b/i,n=0,M={manual:u.Prism&&u.Prism.manual,disableWorkerMessageHandler:u.Prism&&u.Prism.disableWorkerMessageHandler,util:{encode:function e(n){return n instanceof W?new W(n.type,e(n.content),n.alias):Array.isArray(n)?n.map(e):n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function t(e,r){var a,n;switch(r=r||{},M.util.type(e)){case"Object":if(n=M.util.objId(e),r[n])return r[n];for(var i in a={},r[n]=a,e)e.hasOwnProperty(i)&&(a[i]=t(e[i],r));return a;case"Array":return n=M.util.objId(e),r[n]?r[n]:(a=[],r[n]=a,e.forEach(function(e,n){a[n]=t(e,r)}),a);default:return e}},getLanguage:function(e){for(;e&&!c.test(e.className);)e=e.parentElement;return e?(e.className.match(c)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(e){var n=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(e.stack)||[])[1];if(n){var t=document.getElementsByTagName("script");for(var r in t)if(t[r].src==n)return t[r]}return null}},isActive:function(e,n,t){for(var r="no-"+n;e;){var a=e.classList;if(a.contains(n))return!0;if(a.contains(r))return!1;e=e.parentElement}return!!t}},languages:{extend:function(e,n){var t=M.util.clone(M.languages[e]);for(var r in n)t[r]=n[r];return t},insertBefore:function(t,e,n,r){var a=(r=r||M.languages)[t],i={};for(var l in a)if(a.hasOwnProperty(l)){if(l==e)for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);n.hasOwnProperty(l)||(i[l]=a[l])}var s=r[t];return r[t]=i,M.languages.DFS(M.languages,function(e,n){n===s&&e!=t&&(this[e]=i)}),i},DFS:function e(n,t,r,a){a=a||{};var i=M.util.objId;for(var l in n)if(n.hasOwnProperty(l)){t.call(n,l,n[l],r||l);var o=n[l],s=M.util.type(o);"Object"!==s||a[i(o)]?"Array"!==s||a[i(o)]||(a[i(o)]=!0,e(o,t,l,a)):(a[i(o)]=!0,e(o,t,null,a))}}},plugins:{},highlightAll:function(e,n){M.highlightAllUnder(document,e,n)},highlightAllUnder:function(e,n,t){var r={callback:t,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};M.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),M.hooks.run("before-all-elements-highlight",r);for(var a,i=0;a=r.elements[i++];)M.highlightElement(a,!0===n,r.callback)},highlightElement:function(e,n,t){var r=M.util.getLanguage(e),a=M.languages[r];e.className=e.className.replace(c,"").replace(/\s+/g," ")+" language-"+r;var i=e.parentElement;i&&"pre"===i.nodeName.toLowerCase()&&(i.className=i.className.replace(c,"").replace(/\s+/g," ")+" language-"+r);var l={element:e,language:r,grammar:a,code:e.textContent};function o(e){l.highlightedCode=e,M.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,M.hooks.run("after-highlight",l),M.hooks.run("complete",l),t&&t.call(l.element)}if(M.hooks.run("before-sanity-check",l),!l.code)return M.hooks.run("complete",l),void(t&&t.call(l.element));if(M.hooks.run("before-highlight",l),l.grammar)if(n&&u.Worker){var s=new Worker(M.filename);s.onmessage=function(e){o(e.data)},s.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else o(M.highlight(l.code,l.grammar,l.language));else o(M.util.encode(l.code))},highlight:function(e,n,t){var r={code:e,grammar:n,language:t};return M.hooks.run("before-tokenize",r),r.tokens=M.tokenize(r.code,r.grammar),M.hooks.run("after-tokenize",r),W.stringify(M.util.encode(r.tokens),r.language)},tokenize:function(e,n){var t=n.rest;if(t){for(var r in t)n[r]=t[r];delete n.rest}var a=new i;return I(a,a.head,e),function e(n,t,r,a,i,l){for(var o in r)if(r.hasOwnProperty(o)&&r[o]){var s=r[o];s=Array.isArray(s)?s:[s];for(var u=0;u<s.length;++u){if(l&&l.cause==o+","+u)return;var c=s[u],g=c.inside,f=!!c.lookbehind,h=!!c.greedy,d=0,v=c.alias;if(h&&!c.pattern.global){var p=c.pattern.toString().match(/[imsuy]*$/)[0];c.pattern=RegExp(c.pattern.source,p+"g")}for(var m=c.pattern||c,y=a.next,k=i;y!==t.tail&&!(l&&k>=l.reach);k+=y.value.length,y=y.next){var b=y.value;if(t.length>n.length)return;if(!(b instanceof W)){var x=1;if(h&&y!=t.tail.prev){m.lastIndex=k;var w=m.exec(n);if(!w)break;var A=w.index+(f&&w[1]?w[1].length:0),P=w.index+w[0].length,S=k;for(S+=y.value.length;S<=A;)y=y.next,S+=y.value.length;if(S-=y.value.length,k=S,y.value instanceof W)continue;for(var E=y;E!==t.tail&&(S<P||"string"==typeof E.value);E=E.next)x++,S+=E.value.length;x--,b=n.slice(k,S),w.index-=k}else{m.lastIndex=0;var w=m.exec(b)}if(w){f&&(d=w[1]?w[1].length:0);var A=w.index+d,O=w[0].slice(d),P=A+O.length,L=b.slice(0,A),N=b.slice(P),j=k+b.length;l&&j>l.reach&&(l.reach=j);var C=y.prev;L&&(C=I(t,C,L),k+=L.length),z(t,C,x);var _=new W(o,g?M.tokenize(O,g):O,v,O);y=I(t,C,_),N&&I(t,y,N),1<x&&e(n,t,r,y.prev,k,{cause:o+","+u,reach:j})}}}}}}(e,a,n,a.head,0),function(e){var n=[],t=e.head.next;for(;t!==e.tail;)n.push(t.value),t=t.next;return n}(a)},hooks:{all:{},add:function(e,n){var t=M.hooks.all;t[e]=t[e]||[],t[e].push(n)},run:function(e,n){var t=M.hooks.all[e];if(t&&t.length)for(var r,a=0;r=t[a++];)r(n)}},Token:W};function W(e,n,t,r){this.type=e,this.content=n,this.alias=t,this.length=0|(r||"").length}function i(){var e={value:null,prev:null,next:null},n={value:null,prev:e,next:null};e.next=n,this.head=e,this.tail=n,this.length=0}function I(e,n,t){var r=n.next,a={value:t,prev:n,next:r};return n.next=a,r.prev=a,e.length++,a}function z(e,n,t){for(var r=n.next,a=0;a<t&&r!==e.tail;a++)r=r.next;(n.next=r).prev=n,e.length-=a}if(u.Prism=M,W.stringify=function n(e,t){if("string"==typeof e)return e;if(Array.isArray(e)){var r="";return e.forEach(function(e){r+=n(e,t)}),r}var a={type:e.type,content:n(e.content,t),tag:"span",classes:["token",e.type],attributes:{},language:t},i=e.alias;i&&(Array.isArray(i)?Array.prototype.push.apply(a.classes,i):a.classes.push(i)),M.hooks.run("wrap",a);var l="";for(var o in a.attributes)l+=" "+o+'="'+(a.attributes[o]||"").replace(/"/g,"&quot;")+'"';return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+l+">"+a.content+"</"+a.tag+">"},!u.document)return u.addEventListener&&(M.disableWorkerMessageHandler||u.addEventListener("message",function(e){var n=JSON.parse(e.data),t=n.language,r=n.code,a=n.immediateClose;u.postMessage(M.highlight(r,M.languages[t],t)),a&&u.close()},!1)),M;var e=M.util.currentScript();function t(){M.manual||M.highlightAll()}if(e&&(M.filename=e.src,e.hasAttribute("data-manual")&&(M.manual=!0)),!M.manual){var r=document.readyState;"loading"===r||"interactive"===r&&e&&e.defer?document.addEventListener("DOMContentLoaded",t):window.requestAnimationFrame?window.requestAnimationFrame(t):window.setTimeout(t,16)}return M}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(a,e){var s={};s["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};n["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var t={};t[a]={pattern:RegExp("(<__[^]*?>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[^])*?(?=</__>)".replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:n},Prism.languages.insertBefore("markup","cdata",t)}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml;

    const showSourceForLiveResults = () => {
  const resultsElements = Array.from(
    document.getElementsByClassName('live-results'),
  )
  const sourceElements = Array.from(
    document.getElementsByClassName('live-results-source'),
  )
  const zip = (a, b) => a.map((e, i) => [e, b[i]])

  zip(resultsElements, sourceElements).forEach(
    ([resultElement, sourceElement]) => {
      showSource(resultElement, sourceElement)
    },
  )
}

const showFrameSource = (frameElement, sourceElementId) => {
  element = frameElement.contentWindow.document.getElementsByClassName('live-results').item(0)
  sourceElement = document.getElementById(sourceElementId)
  showSource(element, sourceElement)
}

const showSource = (element,  sourceElement) => {
  const highlighted = Prism.highlight(
    element.innerHTML,
    Prism.languages.html,
    'html',
  )
  sourceElement.innerHTML = highlighted
}

Prism.manual = true

document.addEventListener('DOMContentLoaded', function () {
  showSourceForLiveResults()
})

  </script>
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          EdgeSide Docs
        </a>
      </h1>
      <img class="sidebar-img" alt="logo" src="/img/julia9.jpeg"/>
      <p>Livin&#39; on the Edge</p>
    </div>

    <nav class="sidebar-nav">
      <ul><li><a href="/architecture/">Architecture</a></li>
<li><a href="/elements/">Elements</a><ul><li><a href="/elements/template/">Template</a></li>
<li><a href="/elements/graphql/">GraphQL Query</a></li>
<li><a href="/elements/rest/">Rest Query</a></li>
<li><a href="/elements/transformation/">Transformation</a></li>
<li><a href="/elements/request-data/">Request Data</a></li>
<li><a href="/elements/html-include/">HTML Include</a></li>
<li><a href="/elements/conditional/">Conditional</a></li>
<li><a href="/elements/debug/">Debug</a></li></ul></li>
<li><a href="/configuration/">Configuration</a></li>
<li><a href="/customisation/">Customisation</a></li>
<li><a href="/parametermapping/">Parameter Mapping</a></li>
<li><a href="/urlrewriting/">URL Rewriting</a></li>
<li><a href="/authentication/">Authentication</a></li></ul>
      <hr>
      <a class="sidebar-nav-item" href="https://github.com/davidfriar/edgeside">GitHub project</a>
    </nav>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Parameter Mapping</h1>
  <p>Some elements have an attribute named <strong>data-edgeside-parameter-map</strong>. The purpose of this element is to enable request parameters to the current page to be passed as variables to a query. For example, we might want to create a static html page called <em>country.html</em>, which displays details about a particular country in the world. We only want to create one such page, but we want it to display details of whatever country our user is interested in, when she accesses the site with a URL that might look like this:</p>
<pre><code>https://mysite.com/country?country-code=GB
</code></pre>
<p>In order to achieve this we can use a <strong>parameter map</strong>.</p>
<ul>
<li>
<p>A <strong>parameter map</strong> consists of one or more <strong>parameter map entries</strong>, separated by commas.</p>
</li>
<li>
<p>A <strong>parameter map entry</strong> consists of a <strong>left hand side</strong> and a <strong>right hand side</strong>, separated by a colon.</p>
</li>
<li>
<p>If the <strong>left hand side</strong> and the <strong>right hand side</strong> of a parameter map are identical, the comma may be omitted and the entry can consist of just a single part which stands for both left and right hand sides.</p>
</li>
<li>
<p>The <strong>left hand side</strong> of a <strong>parameter map entry</strong> denotes a variable name, which can be used in a service query (either as part of the endpoint URL, in the case of a REST query, or as a GraphQL variable that can be referenced as part of a GraphQL query). For GraphQL queries, the left hand side consists of any valid GraphQL variable name. For REST queries, the left hand side must begin with '$' followed by any string (this inconsistency between REST and GraphQL elements may be removed in future).</p>
</li>
<li>
<p>The <strong>right hand</strong> side of a <strong>parameter map entry</strong> refers to the URL current page request. This will typically be the name of a URL search parameter, whose value will then be mapped to the request.</p>
</li>
<li>
<p>There is a special form of the <strong>right hand side</strong> which can be used to refer to URL segments instead of search parameters. This takes the form '/n' (a slash character followed by an integer). The integer part of this form refers to the number of segments from the right hand end of the URL, where 0 signifies the 'filename', 1 signifies the segment before the filename and so on. Thus if we have a URL such as <em>http://mysite.com/geography/GB/country.html</em>, we can refer to the country code with '/1'. Note that in order to take advantage of this capability you will most likely also need to use the <a href="/urlrewriting">URL Rewriting</a> capability in order to allow a single page to be served to multiple URLs.</p>
</li>
<li>
<p>In addition to deriving variables from the current page request, it is also possible in some elements to use the context of data that has been fetched by some other element. This requires that the <strong>data-edgeside-input-key</strong> has a value which refers to some other element which can provide the data. In this case we can use a <strong>right hand side</strong> of the form <em>${expression}</em>, where <em>expression</em> is a JavaScript expression which will be evaluated in the context of the data found under the input key specified by the element.</p>
</li>
</ul>
<p>The table below summarises the possibilities:</p>
<table>
<thead>
<tr>
<th>Parameter Map</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>foo</td>
<td>Use the search parameter named 'foo' as a variable named 'foo'.</td>
</tr>
<tr>
<td>foo, bar</td>
<td>Use the search parameter named 'foo' as a variable named 'foo' and the search parameter named 'bar' as a variable named 'bar'.</td>
</tr>
<tr>
<td>foo:wibble, bar:wobble</td>
<td>Use the search parameter named 'wibble' as a variable named 'foo' and the search parameter named 'wobble' as a variable named 'bar'. For graphql queries variables are passed using the standard GraphQL mechanism for GET requests. For REST queries they are passed as request params.</td>
</tr>
<tr>
<td>city:/1,country:/2</td>
<td>Extract the variables 'city' and 'country' from a URL, for example, like this <em>http://mysite.com/{country}/{city}/country.html</em>.</td>
</tr>
<tr>
<td>$foo:foo</td>
<td>Use the request parameter named 'foo' as a value to replace the string $foo in a segment of the endpoint URL of a rest query.</td>
</tr>
<tr>
<td>country:${cf.country}</td>
<td>Make the country code detected by cloudflare in the incoming request available to use in a query as the variable 'country'. This assumes that there is a preceding <a href="request-data">Request Data</a> element and that our <strong>edgeside-data-input-key</strong> has been set to the same value as its <strong>data-edgeside-key.</strong></td>
</tr>
</tbody>
</table>

</div>

    </div>

  </body>
</html>
